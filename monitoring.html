<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Beji HydroFarm - Monitoring</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/monitoring-style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  </head>
  <body>
    <div class="monitor-container">
      <header class="monitor-header">
        <h1>Realtime Monitoring</h1>
      </header>

      <div class="status-bar">
        <div class="status-icon"><i class="fas fa-sliders-h"></i></div>
        <div class="status-text">
          <span>Status Terkini Sistem</span>
          <small id="lastUpdated">Menunggu data...</small>
        </div>
        <div class="status-refresh" id="refreshButton" title="Muat Ulang Data">
          <i class="fas fa-sync-alt"></i>
        </div>
      </div>

      <section class="sensor-grid">
        <div class="sensor-card" id="tdsLevelCard">
          <h3><i class="fas fa-flask icon-green"></i> TDS Level</h3>
          <div class="gauge-container">
            <div class="gauge" id="tdsLevelGauge">
              <div class="gauge-cover">
                <span class="gauge-value">- ppm</span>
              </div>
            </div>
          </div>
        </div>

        <div class="sensor-card" id="phLevelCard">
          <h3><i class="fas fa-thermometer-half icon-red"></i> Ph Level</h3>
          <div class="gauge-container">
            <div class="gauge" id="phLevelGauge">
              <div class="gauge-cover"><span class="gauge-value">-</span></div>
            </div>
          </div>
        </div>
        <!--
        <div class="sensor-card" id="batteryLevelCard">
          <h3><i class="fas fa-battery-half icon-orange"></i> Battery Level</h3>
          <div class="gauge-container">
            <div class="gauge" id="batteryLevelGauge">
              <div class="gauge-cover"><span class="gauge-value">-%</span></div>
            </div>
          </div>
        </div>

        <div class="sensor-card" id="motorStateCard">
          <h3><i class="fas fa-sync-alt icon-grey"></i> Status Motor</h3>
          <div class="motor-status-display">
            <span id="motorStateValue" class="state-value state-off">OFF</span>
          </div>
        </div>
        -->
      </section>

      <section class="settings-section"></section>
    </div>
    <nav class="bottom-nav">
      <a href="home.html" class="nav-item"><i class="fas fa-home"></i></a>
      <a href="monitoring.html" class="nav-item active"
        ><i class="fas fa-chart-line"></i
      ></a>
      <a href="#" id="logoutButton" class="nav-item" title="Logout">
        <i class="fas fa-sign-out-alt"></i>
      </a>
    </nav>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="js/firebase.js"></script>
    <script>
      // Deklarasi variabel global untuk Firebase services
      let app;
      let auth;
      let database;

      try {
        app = firebase.initializeApp(firebaseConfig);
        auth = firebase.auth();
        database = firebase.database(); // Inisialisasi Database
        console.log(
          "Firebase Initialized Successfully (App, Auth, Database) on monitoring.html"
        );
      } catch (e) {
        console.error("Error initializing Firebase:", e);
        const lastUpdatedElement = document.getElementById("lastUpdated");
        // Cek elemen ada sebelum diakses
        if (lastUpdatedElement)
          lastUpdatedElement.textContent = "Error: Gagal memuat konfigurasi.";
      }
    </script>

    <script src="js/monitoring-script.js"></script>
  </body>
</html>
